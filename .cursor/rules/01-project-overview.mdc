---
description: iSaaSIT project overview, tech stack, and core concepts
globs: 
alwaysApply: true
---

# 1. iSaaSIT Project Overview

This document provides the foundation for understanding the iSaaSIT project, its purpose, and core architecture.

## What is iSaaSIT

- **iSaaSIT** is an open-source SaaS starter kit designed for agencies and freelancers who need a repeatable client project template.
- Provides a multi-tenant foundation where:
  - An **agency (Org)** manages multiple **client companies (Customers)**
  - Role-based data isolation ensures proper access control
  - Billing with usage caps enforces plan limits
  - A client portal enables customer self-service
- **Base Template:** Fork of `get-convex/workos-authkit` (TanStack Start + Convex + WorkOS AuthKit)
- **License:** MIT

## Technology Stack

### Frontend
- **React 19** - UI framework
- **TanStack Start** - Full-stack React framework with SSR support
- **TanStack Router** - File-based routing with type-safe navigation
- **TanStack React Query** - Server state management with Convex integration
- **Tailwind CSS v4** - Utility-first styling
- **Vite 7** - Build tool and dev server

### Backend
- **Convex** - Serverless backend with real-time database
- **WorkOS AuthKit** - Authentication via JWT tokens
- **TypeScript 5.9** - Type-safe development

### Planned Integrations
- **Lemon Squeezy** - Billing and subscriptions (Merchant of Record)
- **shadcn/ui** - Component library

## Project Structure

```
/
├── src/                          # Frontend source code
│   ├── routes/                   # File-based routes (TanStack Router)
│   │   ├── __root.tsx           # Root layout with auth setup
│   │   ├── index.tsx            # Home page (public)
│   │   ├── callback.tsx         # WorkOS OAuth callback handler
│   │   ├── _authenticated.tsx   # Protected route layout
│   │   └── _authenticated/      # Protected routes
│   ├── router.tsx               # Router configuration with Convex + WorkOS
│   ├── start.ts                 # TanStack Start configuration
│   └── app.css                  # Global styles (Tailwind v4)
├── convex/                       # Backend Convex functions
│   ├── schema.ts                # Database schema
│   ├── auth.config.ts           # WorkOS JWT auth configuration
│   └── _generated/              # Auto-generated Convex types
├── .cursor/rules/               # AI coding rules (this directory)
├── .planning/                   # Project planning documents
└── AGENTS.md                    # AI agent guide
```

## Core Entities

| Entity | Description | Managed By |
|--------|-------------|------------|
| **Org** | Agency organization | WorkOS (org + membership) + Convex (subscription data) |
| **Customer** | Agency's client company | Convex table (linked to orgId) |
| **User** | End user | WorkOS; linked to customerId if role = Client |
| **StaffCustomerAssignment** | Maps Staff to accessible Customers | Convex table |

## Role Definitions

| Role | Visibility | Capabilities |
|------|------------|--------------|
| **Admin** | All org data | Billing, invites, full access |
| **Staff** | Assigned Customers only | Standard access within scope |
| **Client** | Own Customer only | Limited access within scope |

## Development Commands

```bash
# Start development (runs frontend + backend in parallel)
npm run dev

# Start only frontend dev server
npm run dev:frontend

# Start only Convex backend
npm run dev:backend

# Build for production
npm run build

# Initialize Convex (first-time setup)
npx convex dev
```

## Important Files to Know

### Auto-Generated Files (Do Not Edit)
- `convex/_generated/*` - Generated by `npx convex dev`
- `src/routeTree.gen.ts` - Generated by TanStack Router

### Key Configuration Files
- `convex.json` - Convex deployment settings with AuthKit integration
- `convex/auth.config.ts` - JWT validation for WorkOS tokens
- `vite.config.ts` - Vite + TanStack Start + React configuration

## External Documentation

- [Convex Docs](https://docs.convex.dev/)
- [TanStack Start](https://tanstack.com/start)
- [TanStack Router](https://tanstack.com/router)
- [WorkOS AuthKit](https://workos.com/docs/authkit)
- [Tailwind CSS v4](https://tailwindcss.com/)
