---
phase: 04-polar-migration
plan: 02
type: execute
wave: 2
depends_on: [04-01]
files_modified:
  - src/routes/_authenticated/billing.tsx
  - src/routes/_authenticated/tools.tsx
  - src/config/billing.ts
  - README.md
  - docs/README.md
  - convex/README.md
  - DEPLOYMENT.md
  - .env.local.example
  - docs/src/content/docs/index.mdx
  - docs/src/content/docs/features/billing.mdx
  - docs/src/content/docs/development/tools.mdx
  - docs/src/content/docs/development/environment.mdx
  - docs/src/content/docs/guides/architecture.mdx
  - docs/src/content/docs/guides/introduction.mdx
  - docs/src/content/docs/blog/getting-started.mdx
  - docs/src/content/docs/blog/deploying-to-production.mdx
  - .planning/PROJECT.md
  - .planning/REQUIREMENTS.md
  - .planning/STATE.md
  - .planning/codebase/INTEGRATIONS.md
autonomous: true
must_haves:
  truths:
    - "Billing UI uses Polar checkout and portal links"
    - "Docs and README reference Polar setup instead of Lemon Squeezy"
    - "Env var examples and deployment guides include Polar configuration"
  artifacts:
    - path: "src/routes/_authenticated/billing.tsx"
      provides: "Polar checkout and subscription display"
      contains: "api.polar"
    - path: "docs/src/content/docs/features/billing.mdx"
      provides: "Polar billing setup documentation"
      contains: "POLAR_"
    - path: "DEPLOYMENT.md"
      provides: "Polar deployment checklist"
      contains: "Polar"
  key_links:
    - from: "src/routes/_authenticated/billing.tsx"
      to: "convex/polar.ts"
      via: "api.polar actions and queries"
      pattern: "api\.polar"
---

<objective>
Update the UI and documentation to use Polar and remove Lemon Squeezy references.

Purpose: Ensure the billing UX and developer guidance align with the new billing provider.
Output: Polar-focused billing UI and docs, plus updated env/deployment instructions.
</objective>

<execution_context>
@/Users/boss/.config/opencode/get-shit-done/workflows/execute-plan.md
@/Users/boss/.config/opencode/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/04-polar-migration/04-DISCOVERY.md
@src/routes/_authenticated/billing.tsx
@src/routes/_authenticated/tools.tsx
@src/config/billing.ts
@docs/src/content/docs/features/billing.mdx
@DEPLOYMENT.md
@README.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Update billing UI and tools checks for Polar</name>
  <files>src/routes/_authenticated/billing.tsx, src/routes/_authenticated/tools.tsx, src/config/billing.ts</files>
  <action>
  - Replace Lemon Squeezy checkout flow with `api.polar.generateCheckoutLink` and `api.polar.generateCustomerPortalUrl`.
  - Use `api.polar.getCurrentSubscription` (and product keys) for status/plan display.
  - Update any “Lemon Squeezy” copy or warnings in the tools page to reflect Polar env configuration.
  - Remove Lemon Squeezy-specific UI data (variant IDs, store slug) from config.
  </action>
  <verify>npm run lint</verify>
  <done>Billing UI renders Polar-based subscription data and the tools page references Polar env vars.</done>
</task>

<task type="auto">
  <name>Task 2: Replace Lemon Squeezy references across docs and planning metadata</name>
  <files>README.md, docs/README.md, convex/README.md, DEPLOYMENT.md, .env.local.example, docs/src/content/docs/index.mdx, docs/src/content/docs/features/billing.mdx, docs/src/content/docs/development/tools.mdx, docs/src/content/docs/development/environment.mdx, docs/src/content/docs/guides/architecture.mdx, docs/src/content/docs/guides/introduction.mdx, docs/src/content/docs/blog/getting-started.mdx, docs/src/content/docs/blog/deploying-to-production.mdx, .planning/PROJECT.md, .planning/REQUIREMENTS.md, .planning/STATE.md, .planning/codebase/INTEGRATIONS.md</files>
  <action>
  - Replace Lemon Squeezy mentions with Polar in docs, guides, and README files.
  - Update environment variable examples to use `POLAR_ORGANIZATION_TOKEN`, `POLAR_WEBHOOK_SECRET`, and `POLAR_SERVER`.
  - Update deployment steps to point to `https://<deployment>.convex.site/polar/events` and Polar dashboard setup.
  - Ensure docs explain how to plug in a new Polar account (create products, copy product IDs, set webhook).
  - Do not edit generated docs in `docs/dist/` or `docs/.astro/`.
  </action>
  <verify>npm run build:docs</verify>
  <done>All public docs and planning metadata reference Polar, and Lemon Squeezy references are removed from source docs.</done>
</task>

</tasks>

<verification>
- Billing page uses Polar APIs and compiles cleanly.
- Docs build succeeds after content updates.
</verification>

<success_criteria>

- README and docs describe Polar setup and required env vars.
- Tools and billing UI no longer reference Lemon Squeezy.
- No Lemon Squeezy references remain in source documentation files.
  </success_criteria>

<output>
After completion, create `.planning/phases/04-polar-migration/04-02-SUMMARY.md`
</output>
